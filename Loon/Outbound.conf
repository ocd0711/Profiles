# é€‚ç”¨äº Loon 2.1.19 + ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶
# 2022å¹´06æœˆ11æ—¥ 00:25 UTC/GMT +8

# æ¨è GEOIP é…ç½®åœ°å€
# https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

[General]
# IPv6 æ”¯æŒ
ipv6 = false
# è·³è¿‡æŸä¸ªåŸŸåæˆ–è€…IPæ®µ
skip-proxy = 192.168.0.0/16,172.16.0.0/12,127.0.0.0/8,100.64.0.0/10,17.0.0.0/8,10.0.0.0/8,localhost,*.local,e.crashlynatics.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
# DNS æœåŠ¡å™¨ï¼Œå¦‚æœåªåœ¨ä¸­å›½å¤§é™†å¢ƒå†…ä½¿ç”¨ï¼Œæ¨èåˆ é™¤ 1.0.0.1 å’Œ 8.8.8.8
dns-server = system,1.0.0.1,8.8.8.8,114.114.114.114,119.29.29.29,223.5.5.5
# Wi-Fi è®¿é—®
allow-udp-proxy = false
allow-wifi-access = false
wifi-access-http-port = 7222
wifi-access-socket5-port = 7221
# ç½‘ç»œæµ‹è¯• URL
proxy-test-url = http://www.gstatic.com/generate_204
test-timeout = 5
# è§£æå™¨
resource-parser = https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/backend/dist/sub-store-parser.loon.min.js

[Proxy]
# å†…ç½® DIRECTã€REJECT ç­–ç•¥
# èŠ‚ç‚¹åç§° = åè®®ï¼ŒæœåŠ¡å™¨åœ°å€ï¼ŒæœåŠ¡å™¨ç«¯å£ï¼ŒåŠ å¯†åè®®ï¼Œå¯†ç 

[Remote Proxy]
# è®¢é˜…èŠ‚ç‚¹ï¼Œæ ¼å¼ï¼šåˆ«å = è®¢é˜… URL
# ä»¥ Dler Cloud ä¸ºä¾‹ï¼ŒDler Cloud ç”¨æˆ·å°†ä¸‹é¢è®¢é˜…é“¾æ¥çš„ XXXXXX æ›¿æ¢ä¸ºè‡ªå·±çš„è®¢é˜… token å³å¯
# å…¶ä»–æœºåœºç”¨æˆ·ï¼Œæ³¨æ„ä¿®æ”¹åˆ«åï¼ˆåŒ…æ‹¬è¯¥é…ç½®æ–‡ä»¶ä¸‹æ–¹æ‰€æœ‰ Dler Cloud å­—æ ·ï¼‰
Dler Cloud = https://sub.store/download/collection/OCD,udp=true,fast-open=true,vmess-aead=true,update-interval=43200,img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/mini/Dler.png

[Remote Filter]
# ç­›é€‰è®¢é˜…èŠ‚ç‚¹ï¼Œç­›é€‰åçš„ç»“æœå¯åŠ å…¥åˆ°ç­–ç•¥ç»„ä¸­ï¼Œç›®å‰æ”¯æŒä¸‰ç§ç­›é€‰æ–¹å¼
# NodeSelect: ä½¿ç”¨åœ¨UIä¸Šé€‰æ‹©çš„èŠ‚ç‚¹ã€‚
# NameKeyword: æ ¹æ®æä¾›çš„å…³é”®è¯å¯¹è®¢é˜…ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åç§°è¿›è¡Œç­›é€‰ï¼Œä½¿ç”¨ç­›é€‰åçš„èŠ‚ç‚¹ã€‚
# NameRegex: æ ¹æ®æä¾›çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è®¢é˜…ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åç§°è¿›è¡Œç­›é€‰ï¼Œä½¿ç”¨ç­›é€‰åçš„èŠ‚ç‚¹ã€‚
# æ ¹æ®è‡ªå·±æœºåœºåŠæƒ³ç”¨çš„èŠ‚ç‚¹è¿›è¡Œåˆ æ”¹ï¼Œå¦‚æƒ³è¿‡æ»¤ â€œé¦™æ¸¯ IPLCâ€ï¼Œè¯·ä¿®æ”¹ FilterKey ä¸º â€œ.*é¦™æ¸¯ IPLCâ€
Dler Cloud - HK = NameRegex,Dler Cloud,FilterKey = .*(é¦™æ¸¯|Hong Kong|HK|hk)
Dler Cloud - TW = NameRegex,Dler Cloud,FilterKey = .*(å°æ¹¾|Taiwan|TW|tw|å°åŒ—)
Dler Cloud - SG = NameRegex,Dler Cloud,FilterKey = .*(æ–°åŠ å¡|Singapore|SG|sg)
Dler Cloud - JP = NameRegex,Dler Cloud,FilterKey = .*(æ—¥æœ¬|Japan|JP|jp)
Dler Cloud - KR = NameRegex,Dler Cloud,FilterKey = .*(éŸ©å›½|Korea|KR|kr)
Dler Cloud - US = NameRegex,Dler Cloud,FilterKey = .*(ç¾å›½|United States|US|us)

[Proxy Group]
# é»˜è®¤æ³¨é‡Šéƒ¨åˆ†è§„åˆ™åŠç­–ç•¥ï¼Œå¦‚éœ€ä½¿ç”¨è¯·å–æ¶ˆ # å¤‡æ³¨
ä»£ç† = select,è‡ªåŠ¨é€‰æ‹©,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,Dler Cloud,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
SSID = ssid,default=ä»£ç†,cellular=ä»£ç†,"OCD_AP"=DIRECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/SSID.png
å¤§é™†ç½‘ç»œ = select,ç›´è¿,SSID,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Domestic.png
è‹¹æœæœåŠ¡ = select,ç›´è¿,SSID,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png
å›½å†…åª’ä½“ = select,å¤§é™†ç½‘ç»œ,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/StreamingCN.png
å›½é™…åª’ä½“ = select,SSID,ç›´è¿,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Streaming.png
# ç”µæŠ¥æœåŠ¡ = select,SSID,æ–°åŠ å¡èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,é¦™æ¸¯èŠ‚ç‚¹,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram_X.png
# å¾®è½¯æœåŠ¡ = select,ç›´è¿,SSID,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
è´å®æœåŠ¡ = select,SSID,ç›´è¿,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PayPal.png
å…¶ä»– = select,SSID,ç›´è¿,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
å¹¿å‘Šæ‹¦æˆª = select,æ‹¦æˆª,ç›´è¿,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Advertising.png

# æ³¨æ„ä¸‹æ–¹çš„ Dler Cloud åç§°ï¼Œå¦‚æœ‰ä¸ä½¿ç”¨çš„å›½å®¶/åœ°åŒºèŠ‚ç‚¹ç­–ç•¥ç»„ï¼Œè¯·åœ¨ä¸Šæ–¹è§„åˆ™ç­–ç•¥ç»„ä¸­ä¸€å¹¶åˆ é™¤ç›¸å…³èŠ‚ç‚¹ç­–ç•¥ç»„
è‡ªåŠ¨é€‰æ‹© = fallback,Dler Cloud - HK,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Round_Robin.png
é¦™æ¸¯èŠ‚ç‚¹ = fallback,Dler Cloud - HK,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
å°æ¹¾èŠ‚ç‚¹ = fallback,Dler Cloud - TW,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png
æ–°åŠ å¡èŠ‚ç‚¹ = fallback,Dler Cloud - SG,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
æ—¥æœ¬èŠ‚ç‚¹ = fallback,Dler Cloud - JP,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
éŸ©å›½èŠ‚ç‚¹ = fallback,Dler Cloud - KR,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Korea.png
ç¾å›½èŠ‚ç‚¹ = fallback,Dler Cloud - US,url = http://www.gstatic.com/generate_204,interval = 300,max-timeout = 3000,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

# ä¸ºäº†ä¸ Proxy ç­–ç•¥åç§°ä¿æŒä¸€è‡´
ç›´è¿ = select,DIRECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Direct.png
æ‹¦æˆª = select,REJECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Reject.png

# SSID ç­–ç•¥ï¼Œæ ¼å¼ï¼šåˆ«å = ssidï¼Œé»˜è®¤ = ç­–ç•¥ï¼Œ èœ‚çª = ç­–ç•¥ï¼Œssidåç§° = ç­–ç•¥
#SSID = ssid, default = PROXY, cellular = PROXY, "Sophisticated" = DIRECT

[Rule]
# æœ¬åœ°è§„åˆ™
# Type:DOMAIN-SUFFIX,DOMAIN,DOMAIN-KEYWORD,USER-AGENT,URL-REGEX,IP-CIDR

DOMAIN,aqi.waqi.info,æ—¥æœ¬èŠ‚ç‚¹

DOMAIN-KEYWORD,announce,DIRECT
DOMAIN-KEYWORD,torrent,DIRECT
DOMAIN-KEYWORD,tracker,DIRECT
DOMAIN-SUFFIX,smtp,DIRECT
URL-REGEX,(Subject|HELO|SMTP),DIRECT

DOMAIN-SUFFIX,local,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
IP-CIDR,17.0.0.0/8,DIRECT,no-resolve
IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
IP-CIDR,192.168.0.0/16,DIRECT,no-resolve

GEOIP,CN,å¤§é™†ç½‘ç»œ
FINAL,å…¶ä»–

[Remote Rule]
# è®¢é˜…è§„åˆ™ã€ç­–ç•¥
# ç›´è¿å’Œå¹¿å‘Šæ‹¦æˆª
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Direct/Direct.list, policy=DIRECT, tag=Special, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Advertising/Advertising.list, policy=å¹¿å‘Šæ‹¦æˆª, tag=Advertising, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Advertising/Advertising_Domain.list, policy=å¹¿å‘Šæ‹¦æˆª, tag=Advertising_Domain, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Hijacking/Hijacking.list, policy=è¿è¥å•†åŠ«æŒæˆ–æ¶æ„ç½‘ç«™, tag=Hijacking, enabled=true
# å›½å†…åª’ä½“åˆ†ç»„ï¼Œå¦‚éœ€ä¸ºæŸä¸ªè§„åˆ™åˆ—è¡¨å•ç‹¬è®¾ç½®ç­–ç•¥ï¼Œè¯·ç›´æ¥ä¿®æ”¹ policy= åçš„ç­–ç•¥åç§°
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/ChinaMedia/ChinaMedia.list, policy=å›½å†…åª’ä½“, tag=ChinaMedia, enabled=true
# å›½é™…åª’ä½“åˆ†ç»„ï¼Œå¦‚éœ€ä¸ºæŸä¸ªè§„åˆ™åˆ—è¡¨å•ç‹¬è®¾ç½®ç­–ç•¥ï¼Œè¯·ç›´æ¥ä¿®æ”¹æœ€åçš„ç­–ç•¥åç§°
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/GlobalMedia/GlobalMedia.list, policy=å›½é™…åª’ä½“, tag=GlobalMedia, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/GlobalMedia/GlobalMedia_Domain.list, policy=å›½é™…åª’ä½“, tag=GlobalMedia_Domain, enabled=true
# è‹¹æœæœåŠ¡è§„åˆ™åˆ—è¡¨
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Apple/Apple.list, policy=è‹¹æœæœåŠ¡, tag=Apple, enabled=true
# å¯é€‰è§„åˆ™åˆ—è¡¨
# https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Telegram/Telegram.list, policy=ç”µæŠ¥æœåŠ¡, tag=Telegram, enabled=true
# https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Microsoft/Microsoft.list, policy=å¾®è½¯æœåŠ¡, tag=Microsoft, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/PayPal/PayPal.list, policy=è´å®æœåŠ¡, tag=PayPal, enabled=true
# å¿…é¡»è§„åˆ™åˆ—è¡¨
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Global/Global.list, policy=SSID, tag=Global, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Global/Global_Domain.list, policy=SSID, tag=Global_Domain, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/China/China.list, policy=å¤§é™†ç½‘ç»œ, tag=Domestic, enabled=true

[Rewrite]
# é‡å†™è§„åˆ™
enable = true

[Host]
# å¯ä»¥æŒ‡å®šä»¥ä¸‹å››ç§æ¨¡å¼ï¼š
# 1. æŒ‡å®šåŸŸåä½¿ç”¨å¯¹åº”çš„IPåœ°å€
# 2. å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸå
# 3. æŒ‡å®šåŸŸåè¯·æ±‚ DNS æ—¶ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
## google.com = server:8.8.8.8
## *.baidu.com = server:https://example.com/dns-query
## *.testflight.apple.com = server:8.8.4.4
# 4. æŒ‡å®šå…·ä½“çš„ SSID ç¯å¢ƒä¸‹ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
## ssid:Stick = server:system

[Script]
enable = true

[Plugin]
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/Loon/Redirect/Redirect.plugin, tag=Redirect Rewrite, enabled=true
https://raw.githubusercontent.com/VirgilClyne/VirgilClyne/main/modules/General/General.plugin, tag=ğŸŒ General Settings Enhanced, enable=true
# æŒ‰éœ€æ·»åŠ  å¯èƒ½å¯¼è‡´éƒ¨åˆ† dns è¯·æ±‚å¼‚å¸¸
https://raw.githubusercontent.com/VirgilClyne/VirgilClyne/main/modules/DNS/DNS.plugin, tag=ğŸŒ DNS for Router and Companys, enable=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Advertising/Advertising_MITM.plugin, tag= Advertising, enable=true
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.loon.plugin, tag=BoxJs, enabled=true
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/Loon.plugin, tag=Sub-Store, enabled=true
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/plugin/Siri.plugin, tag=ï£¿ iRingo for Siri & Search, enabled=true
# iOS 16 æš‚ä¸æ”¯æŒ
https://raw.githubusercontent.com/VirgilClyne/iRingo/main/plugin/Weather.plugin, tag=ï£¿ iRingo for Apple Weather, enabled=false
https://github.com/VirgilClyne/iRingo/blob/main/plugin/TestFlight.plugin?raw=true, tag=ï£¿ iRingo for TestFlight, enabled=true
https://github.com/OCD0711/Profiles/blob/master/Loon/Plugin/Scripts.plugin?raw=true, tag=OCD Scripts, enabled=true

[MITM]
# è¯·åœ¨æ­£å¼ä½¿ç”¨å‰å°†å…¶ä»–å·²ä¿¡ä»»è¯ä¹¦çš„ P12 åŠå¯†ç å¡«å…¥ä¸‹æ–¹ï¼Œå¹¶åˆ æ‰ ca-p12 å’Œ ca-passphrase å‰çš„äº•å·
# æˆ–è€…å‰å¾€è®¾ç½®ç•Œé¢ç”Ÿæˆã€å®‰è£…å¹¶ä¿¡ä»»æ–°è¯ä¹¦
enable = true
skip-server-cert-verify = true
tcp-connection = true
ca-passphrase = Dler
ca-p12 = MIIDGgIBAzCCAuAGCSqGSIb3DQEHAaCCAtEEggLNMIICyTCCAb8GCSqGSIb3DQEHBqCCAbAwggGsAgEAMIIBpQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQI5e4W8st2yMMCAggAgIIBeBDhcB5oCpEtPyamF2QSSZMoKnIQ9idB7/spS4BgYMq/zDT8c7SDSKM746+4D98feqkJmAYFUWlXtXOHwSR8QlFad9dTYw4SulHDpDAVr/+da6iCX+LeQuducormCI6xVcmpfZ8qvHWzpfHy5mrKxkuyj5OHlehvYOedDZ9P9s9ME2qZFsffKC4kk398QPjoBMLCb73m7QcFdzdus7NuVAd/kYZRww7ODcXcb5a45Yv4NeRwRjnVT8eCgjGXjJXQgJPAtyAWPLW+o1uS132Qdkmg+8EjwuxL/lOu3rLKh0gWWUFHcxv2rg4OcezyoZuv70zs3A8Ju3wmQ6oZuakeRuRyKu6+9BtgOqxnoBwvTMCI4saY8E318DWZjBOzg9N2vPOhKDeoh8ES9TAbRlcp5Bnp5TWrPhae+XeHlHde5KCr3kjB15/DAhrlh7+ht18I/p1shnRKAd1tH6p62to51j9mSHNxOFFCbBPiFqBSnPmuV2SSOOYHcjUwggECBgkqhkiG9w0BBwGggfQEgfEwge4wgesGCyqGSIb3DQEMCgECoIG0MIGxMBwGCiqGSIb3DQEMAQMwDgQI/FfHqSBxFUoCAggABIGQIJa8eopsdqunR4ZwxWt/ThhdkRw2LFHTbgg5jWdAUQfK2b+I6+Wk9Dimdb2xGzAaYcAVt3ArbfuDTjDUTI4m3pzXBe/edyeXagr6i6DgM9TluB4OsG6hC/MFtF3rvqnCT3DGf5b48hSj0Y5OfJy+iFXmasxtwVIf4pFFylXOOJeJdQry1NgImb0nZwsS8NJAMSUwIwYJKoZIhvcNAQkVMRYEFHijHPCciGG5pbv+qBYZvjpHBIFnMDEwITAJBgUrDgMCGgUABBSxzZGBSpKB8R5FQ6wdiWxFka+xcgQIxB+kS2hfUpkCAggA
